<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Sortable Heatmap and Bar Chart</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://d3js.org/d3.v4.js"></script>
    <script type="text/javascript" src="stupidtable.min.js"></script>
    <link rel="stylesheet" href="https://use.typekit.net/htk2wjy.css">
    <link rel="stylesheet" href="index.css">


    <style>
        th {
            cursor: pointer;
            text-align: left;
            font-family: brandon-grotesque;
            font-size: 1.5vw;
            font-style: normal;
            font-weight: normal;
            letter-spacing: -0.5px;
            color: darkred;
            padding: 5px;
            width: 16%;
            position: sticky;
            vertical-align: middle;
        }

        td {
            font-family: brandon-grotesque;
            font-size: 11px;
            font-style: normal;
            font-weight: 700;
            letter-spacing: normal;
            line-height: 29.450000762939453px;
            text-transform: none;
            color: #7A7A7A;

        }

        h1 {
            text-align: center;
            font-family: Lato, sans-serif;
            font-size: 20px;
            font-style: normal;
            font-weight: 300;
            letter-spacing: 6px;
            line-height: 58px;
            text-transform: uppercase;
            color: #B0925A;
        }

        p {
            font-family: Lato, sans-serif;
            font-size: 13px;
            font-style: normal;
            font-weight: bold;
            letter-spacing: 2px;
            line-height: 24px;
            text-transform: none;
            color: #B0925A !important;

        }

        a {
            text-decoration: none !important;

        }


        div.tooltip {
            position: absolute;
            text-align: left;
            padding: 4px;
            font-family: Lato, arial, sans-serif;
            font-size: 14px;
            background: #eee;
            border-radius: 2px;
            border: 1px solid gray;
            pointer-events: none;
        }
    </style>
</head>

<body>

    <div id="table"></div>

    <script type="text/javascript">









        d3.csv("smartphones-statistics.csv", function (data) {

            console.log(data);





            var myArray = [];

            data.forEach(function (d, i) {



                myArray.push([d.Vendor, d.Share2015, d.Share2016, d.Units2015, d.Units2016,]);
                console.log(myArray);

            });

            myArray.sort(function (a, b) {                 //This will sort data
                return a[2] - b[2];         //in descending order
            })


            var table = d3.select("#table").append("table");
            var header = table.append("thead").append("tr");


            header
                .selectAll("th")
                .data(["Vendor", "Market Share 2015", "Market Share 2016",
                    "Units sold in 2015 (000's)", "Units Sold in 2016 (000's)",
                ])
                .enter()
                .append("th")
                .style("width", (d, i) => i == 0 ? "30%" : "15%")
                .text(function (d) {
                    return d;
                });

            var tBody = table.append("tbody");

            var rows = tBody.selectAll("tr")
                .data(myArray)
                .enter()
                .append("tr")


            var maxShare2016 = d3.max(myArray, function (d) {
                return +d[2];
            })


            var color = d3.scaleLinear()
                .domain([0, maxShare2016])
                .range(["#E6F5FF", "#0099FF"])
                .interpolate(d3.interpolateHcl);




            var cells = rows
                .selectAll("td")
                .data(function (d) {
                    return d;
                })
                .enter()
                .append("td")
                .style("background-color", function (d, i) {
                    if (i === 2) {
                        return color(d);
                    }
                })
                .text(function (d) {
                    return d;
                })

            d3.select("#table")
                .selectAll("th")
                .data(["string", "int", "int", "int", "int", "int", "int",])
                .attr("data-sort", function (d) {
                    return d;
                })


            $("table").stupidtable();





        })



    </script>

</body>

</html>