<!DOCTYPE html>
<style>
	.states {
		fill: white;
		stroke: lightgrey;
	}

	.state-borders {
		fill: none;
		stroke: #fff;
		stroke-width: 0.5px;
		stroke-linejoin: round;
		stroke-linecap: round;
		pointer-events: none;
	}
</style>
<svg viewBox="0 0 960 600"></svg>
<script src="https://d3js.org/d3.v4.min.js"></script>
<script src="https://d3js.org/topojson.v2.min.js"></script>
<script>
	var map_labels = [{ "state": "Alabama", "label": "AL", "xValue": 637, "yValue": 338.6934, "region": "south" }, { "state": "Alaska", "label": "AK", "xValue": 245, "yValue": 400, "region": "west" }, { "state": "Arizona", "label": "AZ", "xValue": 315, "yValue": 306.5801, "region": "west" }, { "state": "Arkansas", "label": "AR", "xValue": 560, "yValue": 315.6387, "region": "south" }, { "state": "California", "label": "CA", "xValue": 223, "yValue": 253.9219, "region": "west" }, { "state": "Colorado", "label": "CO", "xValue": 400, "yValue": 245.5645, "region": "west" }, { "state": "Connecticut", "label": "CT", "xValue": -1000, "yValue": -1000, "region": "northeast" }, { "state": "Delaware", "label": "DE", "xValue": -1000, "yValue": -1000, "region": "northeast" }, { "state": "District of Columbia", "label": "DC", "xValue": -1000, "yValue": -1000, "region": "northeast" }, { "state": "Florida", "label": "FL", "xValue": 714, "yValue": 397.8154, "region": "south" }, { "state": "Georgia", "label": "GA", "xValue": 680.0117, "yValue": 335.2354, "region": "south" }, { "state": "Hawaii", "label": "HI", "xValue": 380, "yValue": 465, "region": "west" }, { "state": "Idaho", "label": "ID", "xValue": 310.1851, "yValue": 155, "region": "west" }, { "state": "Illinois", "label": "IL", "xValue": 596.6602, "yValue": 231.2954, "region": "midwest" }, { "state": "Indiana", "label": "IN", "xValue": 633.4111, "yValue": 228.4214, "region": "midwest" }, { "state": "Iowa", "label": "IA", "xValue": 545.8457, "yValue": 202.6782, "region": "midwest" }, { "state": "Kansas", "label": "KS", "xValue": 487, "yValue": 259.1592, "region": "midwest" }, { "state": "Kentucky", "label": "KY", "xValue": 655.1484, "yValue": 264.9658, "region": "south" }, { "state": "Louisiana", "label": "LA", "xValue": 561.4404, "yValue": 369.8135, "region": "south" }, { "state": "Maine", "label": "ME", "xValue": 807.3105, "yValue": 109.855, "region": "northeast" }, { "state": "Maryland", "label": "MD", "xValue": -1000, "yValue": -1000, "region": "northeast" }, { "state": "Massachusetts", "label": "MA", "xValue": -1000, "yValue": -1000, "region": "northeast" }, { "state": "Michigan", "label": "MI", "xValue": 645.6465, "yValue": 181.3647, "region": "midwest" }, { "state": "Minnesota", "label": "MN", "xValue": 530.8594, "yValue": 141.5874, "region": "midwest" }, { "state": "Mississippi", "label": "MS", "xValue": 598.6016, "yValue": 342.1514, "region": "south" }, { "state": "Missouri", "label": "MO", "xValue": 557, "yValue": 261.123, "region": "midwest" }, { "state": "Montana", "label": "MT", "xValue": 370.0981, "yValue": 112.7705, "region": "west" }, { "state": "Nebraska", "label": "NE", "xValue": 473.8364, "yValue": 210.0527, "region": "midwest" }, { "state": "Nevada", "label": "NV", "xValue": 267.8765, "yValue": 219.0957, "region": "west" }, { "state": "New Hampshire", "label": "NH", "xValue": -1000, "yValue": -1000, "region": "northeast" }, { "state": "New Jersey", "label": "NJ", "xValue": 785, "yValue": 210, "region": "northeast" }, { "state": "New Mexico", "label": "NM", "xValue": 385.3774, "yValue": 314.1035, "region": "west" }, { "state": "New York", "label": "NY", "xValue": 753.5781, "yValue": 163.2588, "region": "northeast" }, { "state": "North Carolina", "label": "NC", "xValue": 728.6084, "yValue": 284.5029, "region": "south" }, { "state": "North Dakota", "label": "ND", "xValue": 467.0742, "yValue": 117.3823, "region": "midwest" }, { "state": "Ohio", "label": "OH", "xValue": 670.7197, "yValue": 219.4883, "region": "midwest" }, { "state": "Oklahoma", "label": "OK", "xValue": 500.1963, "yValue": 306.418, "region": "south" }, { "state": "Oregon", "label": "OR", "xValue": 240.2783, "yValue": 139.5654, "region": "west" }, { "state": "Pennsylvania", "label": "PA", "xValue": 730.3535, "yValue": 200.856, "region": "midwest" }, { "state": "Rhode Island", "label": "RI", "xValue": -1000, "yValue": -1000, "region": "northeast" }, { "state": "South Carolina", "label": "SC", "xValue": 712.4395, "yValue": 315.6387, "region": "south" }, { "state": "South Dakota", "label": "SD", "xValue": 468.0742, "yValue": 163.5166, "region": "midwest" }, { "state": "Tennessee", "label": "TN", "xValue": 640.8594, "yValue": 292.8193, "region": "south" }, { "state": "Texas", "label": "TX", "xValue": 480.9902, "yValue": 374.2861, "region": "south" }, { "state": "Utah", "label": "UT", "xValue": 330.1084, "yValue": 234.978, "region": "west" }, { "state": "Vermont", "label": "VT", "xValue": -1000, "yValue": -1000, "region": "northeast" }, { "state": "Virginia", "label": "VA", "xValue": 731.0264, "yValue": 252.7842, "region": "south" }, { "state": "Washington", "label": "WA", "xValue": 256.9365, "yValue": 88.0762, "region": "west" }, { "state": "West Virginia", "label": "WV", "xValue": 701, "yValue": 243, "region": "south" }, { "state": "Wisconsin", "label": "WI", "xValue": 585.2529, "yValue": 163.2588, "region": "midwest" }, { "state": "Wyoming", "label": "WY", "xValue": 385.9287, "yValue": 179.6255, "region": "west" }]
	var svg = d3.select("svg");

	var path = d3.geoPath()

	d3.csv("https://data.jhkforecasts.com/2020-presidential.csv", data => {


		d3.json("https://d3js.org/us-10m.v1.json", function (error, us) {
			if (error) throw error;

			var topo = topojson.feature(us, us.objects.states).features

			topo.forEach((d,i) => {
				d.properties.state = map_labels[i].state
				d.properties.label = map_labels[i].label
				d.properties.xvalue = map_labels[i].xValue
				d.properties.yvalue = map_labels[i].yValue
				return d;
			});

			console.log(topo)
			svg.append("g")
				.attr("class", "states")
				.selectAll("path")
				.data(topo)
				.enter().append("path")
				.attr("d", path);

				svg.selectAll("labels")
				.data(topo)
				.enter()
				.append("text")
				.text(d=>d.properties.label)
				.attr("x",d=>d.properties.xvalue)
				.attr("y",d=>d.properties.yvalue)
				


		})
	});

</script>