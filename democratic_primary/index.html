<html>

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@jhkforecast">
  <meta name="twitter:creator" content="@jhkersting">
  <meta name="twitter:title" content="Democratic Primary Forecast">
  <meta name="twitter:description" content="Who is leading the race for the Democratic Primary">
  <meta name="twitter:image" content="https://jhkforecasts.com/democratic_primary-02.png">
  <title>Democratic Primary</title>
</head>

<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-140782021-2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());

    gtag('config', 'UA-140782021-2');
  </script>

  <script data-ad-client="ca-pub-8025120308040073" async
    src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
  <link rel="icon" href="https://jkstats76.files.wordpress.com/2019/02/cropped-site-icon.png?w=32" sizes="32x32">
  <link rel="icon" href="https://jkstats76.files.wordpress.com/2019/02/cropped-site-icon.png?w=192" sizes="192x192">

  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/d3-tip/0.7.1/d3-tip.min.js"></script>
  <link rel="stylesheet" href="https://use.typekit.net/htk2wjy.css">
  <link rel="stylesheet" href="index.css">



  </style>
</head>

<body>


  <a href="https://jhkforecasts.com">
    <h1 style="font-weight: 300;text-align: center;">JHK Forecasts</h1>
  </a>


  <div id="bigmenu">
    <table style="border-collapse: collapse; border: none;margin-top: 20px;" cellspacing="0" cellpadding="0"
      width="100%" height=100px>
      <tbody>
        <tr>
          <td style="width: 33%; border-right: solid grey 1.0pt; " valign="middle" width="33%">
            <a href="https://projects.jhkforecasts.com/democratic_primary/">
              <img style="text-align: center;" src="demprimarymenu-01.svg">
            </a>
          </td>
          <td style="width: 33%; border-right: solid grey 1.0pt; border-left: none; " valign="middle" width="33%">
            <a href="https://projects.jhkforecasts.com/presidential_forecast/">
              <img style="text-align: center;" src="presforecastmenu-01.svg">
          </td>
          <td style="width: 33%; ; " valign="middle" width="33%">
            <a href="https://projects.jhkforecasts.com/senate_forecast/">
              <img style="text-align: center;" src="senateforecastmenu-01.svg">
          </td>
        </tr>
      </tbody>
    </table>


  </div>


  <div id="smallmenu">
    <table style="border-collapse: collapse; border: none;margin-top: 20px;" cellspacing="0" cellpadding="0"
      width="100%">
      <tbody>
        <tr>
          <td style="width: 35%; border-right: solid grey 1.0pt; " valign="top" width="35%">
            <p style="text-align: center;font-weight: 700;font-size: 13px;"><span style="color: black;"><a
                  href="https://projects.jhkforecasts.com/democratic_primary/"><span style="color: black;">Democratic
                    Primary</span></a><span></p>
          </td>
          <td style="width: 30%; border-right: solid grey 1.0pt; border-left: none; " valign="top" width="30%">
            <p style="text-align: center;font-weight: 700;font-size: 13px;"><span style="color: black;"><a
                  href="https://projects.jhkforecasts.com/presidential_forecast/"><span
                    style="color: black;">Presidential</span></a></span></p>
          </td>
          <td style="width: 35%; ; " valign="top" width="35%">
            <p style="text-align: center;font-weight: 700;font-size: 13px;"><span style="color: black;"><a
                  href="https://projects.jhkforecasts.com/senate_forecast/"><span
                    style="color: black;">Senate</span></a></span></p>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
  <h1 style="text-align: center;font-size: 35;font-weight: 900;background-color: darkblue;color: white;">Democratic
    Primary</h1>

  <div>
    <h1 style="text-align: center;font-weight: 700;font-size: 2vw;"><span
        style="color: black;">Interactives/Projects</span>
      <table style="border-collapse: collapse; border: none;margin-top: 20px;" cellspacing="0" cellpadding="0"
        width="100%">
        <tbody>
          <tr>
            <td style="width: 35%; border-right: solid grey 1.0pt; " valign="top" width="35%">
              <h1
                style="text-align: center;font-weight: 700;font-size: 2vw;text-decoration: solid underline;color: #0077FF;">
                <a href="https://projects.jhkforecasts.com/democratic_primary/manipulator">Manipulator</a></>
            </td>
            <td style="width: 35%; border-right: solid grey 1.0pt; " valign="top" width="35%">
              <h1
                style="text-align: center;font-weight: 700;font-size: 2vw;text-decoration: solid underline;color: #0077FF;">
                <a href="https://projects.jhkforecasts.com/democratic_primary/primarysimulation">Simulator</a></>
            <td style="width: 35%; ; " valign="top" width="35%">
              <h1
                style="text-align: center;font-weight: 700;font-size: 2vw;text-decoration: solid underline;color: #0077FF;">
                <a href="https://projects.jhkforecasts.com/democratic_primary/analysis/">Pollsters/Forecasts
                  Accuracy</a></>
            </td>

          </tr>
          <tr>
            <td style="width: 35%; border-right: solid grey 1.0pt;padding: 5px; " valign="top" width="35%">
              <p style="text-align: center;font-weight: 700;font-size: 1.5vw;">Change the national vote for each
                candidate to give you different outcomes.</p>
            </td>
            <td style="width: 30%; border-right: solid grey 1.0pt; border-left: none;padding: 5px " valign="top"
              width="30%">
              <p style="text-align: center;font-weight: 700;font-size: 1.5vw;">Simulates the primary once togive you an
                random outcome based the forecast</p>
            </td>
            <td style="width: 35%; ; " valign="top" width="35%">
              <p style="text-align: center;font-weight: 700;font-size: 1.5vw;padding: 5px">Calculating the best
                pollsters and forecasters of the Democratic Primary.</p>
            </td>
          </tr>
        </tbody>
      </table>
  </div>


  <h4 style="text-align: center;font-family: interstate-mono;font-weight: 300;font-style: normal;color: grey;"
    id="update"></h4>
  <div style="margin-top: 20px;" id="bubblemap"></div>
  <hr>
  <h2 style="font-weight: 700;">Overview</h2>

  <div id="topline"></div>
  <h2 style="text-align:center">** Win Nomination = Most Delegates </h2>

  <hr>
  <h2 style="font-weight: 700;" class="custom-select">Changes Over Time</h2>


  <div class="phone" style="display: none;" id="votephone"></div>

  <script src="delegatestime copy.js"></script>
  <div class="phone" style="display: none;" id="delegatesphone"></div>
  <script src="wintime copy.js"></script>
  <div class="phone" id="winphone"></div>
  <script src="votetime copy.js"></script>

  <div class="computer" id="win"></div>
  <div class="computer" id="vote"></div>
  <div class="computer" id="delegates"></div>
  <div class="computer" style="text-align:center ;margin-left: 25%;width:50%">
    <button class="btn default" onclick="votefunc()" id="votebutton">Projected Vote Share</button>
    <button class="btn default" onclick="winfunc()" id="winbutton">Win Plurality</button>
    <button class="btn default" onclick="delegatesfunc()" id="winbutton">Projected Delegates</button>
  </div>
  <div class="phone" style="text-align:center ;margin-left: 25%;width:50%">
    <button class="btn default" onclick="votephonefunc()" id="votebutton">Projected Vote Share</button>
    <button class="btn default" onclick="winphonefunc()" id="winbutton">Win Plurality</button>
    <button class="btn default" onclick="delegatesphonefunc()" id="winbutton">Projected Delegates</button>
  </div>
  <script>
    keyState = "US"
    function votefunc() {
      var vote = document.getElementById("vote");
      var win = document.getElementById("win");
      var delegates = document.getElementById("delegates");

      vote.style.display = "inline";
      win.style.display = "none";
      delegates.style.display = "none";
    }
  </script>
  <script>

    function winfunc() {
      var vote = document.getElementById("vote");
      var win = document.getElementById("win");
      var delegates = document.getElementById("delegates");

      vote.style.display = "none";
      win.style.display = "inline";
      delegates.style.display = "none";
    }
  </script>
  <script>

    function delegatesfunc() {
      var vote = document.getElementById("vote");
      var win = document.getElementById("win");
      var delegates = document.getElementById("delegates");

      vote.style.display = "none";
      win.style.display = "none";
      delegates.style.display = "inline";
    }
  </script>

  <script>

    function votephonefunc() {
      var vote = document.getElementById("votephone");
      var win = document.getElementById("winphone");
      var delegates = document.getElementById("delegatesphone");

      vote.style.display = "inline";
      win.style.display = "none";
      delegates.style.display = "none";
    }
  </script>
  <script>

    function winphonefunc() {
      var vote = document.getElementById("votephone");
      var win = document.getElementById("winphone");
      var delegates = document.getElementById("delegatesphone");

      vote.style.display = "none";
      win.style.display = "inline";
      delegates.style.display = "none";
    }
  </script>
  <script>

    function delegatesphonefunc() {
      var vote = document.getElementById("votephone");
      var win = document.getElementById("winphone");
      var delegates = document.getElementById("delegatesphone");

      vote.style.display = "none";
      win.style.display = "none";
      delegates.style.display = "inline";
    }
  </script>
  <script src="wintime.js"></script>
  <script src="delegatestime.js"></script>
  <script src="votetime.js"></script>
  <hr>
  
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle" style="display:block;margin-right: 10%;margin-left: 10%" data-ad-format="fluid" data-ad-layout-key="-h2+d+5c-9-3e"
      data-ad-client="ca-pub-8025120308040073" data-ad-slot="8603820464"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  <h2 style="font-weight: 700;">Delegate Breakdown</h2>
  <div style="text-align: center;">


    <select style="font-family: brandon-grotesque;font-size: 15px;display: none;" id="selectboxrace">
      <option value="-">Projected</option>

    </select>
  </div>
  <a href="#top">
    <h2 style="font-weight: 700;text-align: center;text-decoration: underline;">Back to top</h2>
  </a>
  <div class="computer" id="race"></div>
  <div class="phone" id="racephone"></div>
  <script src="race.js"></script>
  <script src="race copy.js"></script>
  <div id="delegatesover"></div>
  
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <ins class="adsbygoogle" style="display:block;margin-right: 10%;margin-left: 10%" data-ad-format="fluid" data-ad-layout-key="-h2+d+5c-9-3e"
      data-ad-client="ca-pub-8025120308040073" data-ad-slot="8603820464"></ins>
    <script>
      (adsbygoogle = window.adsbygoogle || []).push({});
    </script>
  <a href="#top">
    <h2 style="font-weight: 700;text-align: center;text-decoration: underline;">Back to top</h2>
  </a>
  <h2 style="font-weight: 700;">Latest Polls</h2>
  <div id="pollavg"></div>
  <script src="statepollavg.js"></script>
  <div id="polls"></div>
  <script>var parse_date = d3.timeParse("%m/%d/%y")
    var parse_date_time = d3.timeParse("%m/%d/%y %H:%M")
    var allcandidates = ["Biden", "Bloomberg", "Booker", "Buttigieg", "Gabbard", "Klobuchar", "Sanders", "Steyer", "Warren", "Yang"]

    var pollster_grade = [
      { Grade: "A+", Value: 1.5 },
      { Grade: "A", Value: 1.35 },
      { Grade: "A-", Value: 1.2 },
      { Grade: "A/B", Value: 1.1 },
      { Grade: "B+", Value: 1 },
      { Grade: "B", Value: .925 },
      { Grade: "B-", Value: .85 },
      { Grade: "B/C", Value: .8 },
      { Grade: "C+", Value: .7 },
      { Grade: "C", Value: .65 },
      { Grade: "C-", Value: .55 },
      { Grade: "C/D", Value: .5 },
      { Grade: "D+", Value: .4 },
      { Grade: "D", Value: .3 },
      { Grade: "D-", Value: .2 },
      { Grade: "", Value: .7 },
    ]
    var pollster_grade_letter = pollster_grade.map((d) => {
      return d.Grade
    })

    var pollster_grade_value = pollster_grade.map((d) => {
      return d.Value
    })

    d3.csv("https://projects.fivethirtyeight.com/polls-page/president_primary_polls.csv", function (data) {
      var data = data.filter(d => d.party == "DEM")
      console.log(data)
      var data_nested = d3.nest()
        .key(d => d.question_id)
        .entries(data)
      console.log(data_nested)
      var polls = []
      for (let i = 0; i < data_nested.length; i++) {
        var poll_response = []
        var cands_polled = []
        for (let j = 0; j < allcandidates.length; j++) {

          var poll_candidate = data_nested[i].values.filter(d => d.answer == allcandidates[j])


          var poll_answer = poll_candidate.map((d) => {
            return +d.pct
          })

          poll_response.push(poll_answer)


        }

        var new_poll = {
          question_id: +data_nested[i].values[0].question_id,
          poll_id: +data_nested[i].values[0].poll_id,
          state: data_nested[i].values[0].state == "" ? "US" : data_nested[i].values[0].state,
          pollster_id: +data_nested[i].values[0].pollster_id.replace(","),
          pollster: data_nested[i].values[0].pollster,
          sponsor_ids: +data_nested[i].values[0].sponsor_ids,
          sponsors: data_nested[i].values[0].sponsors,
          display_name: data_nested[i].values[0].display_name,
          pollster_rating_id: +data_nested[i].values[0].pollster_rating_id,
          pollster_rating_name: data_nested[i].values[0].pollster_rating_name,
          grade: data_nested[i].values[0].fte_grade,
          n: +data_nested[i].values[0].sample_size,
          population: data_nested[i].values[0].population,
          start_date: parse_date(data_nested[i].values[0].start_date),
          end_date: parse_date(data_nested[i].values[0].edn_date),
          created_at: parse_date_time(data_nested[i].values[0].created_at),
          url: data_nested[i].values[0].url,
          Biden: +poll_response[0] == "" ? "-" : +poll_response[0],
          Bloomberg: +poll_response[1] == "" ? "-" : +poll_response[1],
          Buttigieg: +poll_response[3] == "" ? "-" : +poll_response[3],
          Klobuchar: +poll_response[5] == "" ? "-" : +poll_response[5],
          Sanders: +poll_response[6] == "" ? "-" : +poll_response[6],
          Steyer: +poll_response[7] == "" ? "-" : +poll_response[7],
          Warren: +poll_response[8] == "" ? "-" : +poll_response[8],
          Yang: +poll_response[9] == "" ? "-" : +poll_response[9],
          date: data_nested[i].values[0].end_date,
          grade_value: pollster_grade_value[pollster_grade_letter.indexOf(data_nested[i].values[0].fte_grade)]
        }
        polls.push(new_poll)
      }

      console.log(polls)

      var polls_filtered = polls.splice(0, 100)
      var svgHeight = polls_filtered.length * 50 + 60


      var svg = d3.select("#polls").append("svg")
        .attr("viewBox", "-50 0 1050 " + svgHeight)
        .append('g')



      var weightScale = d3.scaleLinear()
        .domain([0, 50])
        .range(["white", "#a4b1b5"]);
      var gopScale = d3.scaleLinear()
        .domain([20, 80])
        .range(["white", "#a4b1b5"]);

      var demScale = d3.scaleLinear()
        .domain([0, 50])
        .range(["white", "#0077FF"]);

      var demScale = d3.scaleLinear()
        .domain([0, 50])
        .range(["white", "#0077FF"]);

      var grade_scale = d3.scaleLinear()
        .domain([0.2, .75, 1.1, 1.5])
        .range(["#F0474E", "#FCDD26", "#37B76E", "#2079FF"])

      var parseTime = d3.timeParse("%Y-%m-%d %H:%M:%S")
      formatDate = d3.timeFormat("%m - %d"),
        formatMonth = d3.timeFormat("%Y-%m-%d"),
        bisectDate = d3.bisector(d => d.date).left,
        formatValue = d3.format(".0f");

      var svgLegend = svg.append('g')
        .attr('class', 'gLegend')
        .attr("transform", "translate(" + 0 + "," + 90 + ")")



      var legend = svgLegend.selectAll('.legend')
        .data(polls_filtered)
        .enter().append('g')
        .attr("class", "legend")
        .attr("transform", function (d, i) { return "translate(0," + i * 50 + ")" })



      legend.append("a").attr("href", d => d.url).append("text")
        .attr("class", "legend-text")
        .attr("x", 0)
        .attr("y", -10)
        .style("fill", "Black")
        .style("font-size", 15)
        .attr("font-weight", 500)
        .text(d => d.pollster)
        .attr("text-anchor", "start")
        .call(wrap, 275)
        .on("mouseover", function (d) {
          d3.select(this)
            .attr("text-decoration", "underline")
        })
        .on("mouseout", function (d) {
          d3.select(this)
            .attr("text-decoration", "none")
        })

      legend.append("rect")
        .attr("x", 275)
        .attr("y", -30)
        .attr("width", 1000)
        .attr("height", 50)
        .style("fill", "white")


      legend.append("text")
        .attr("class", "legend-text")
        .attr("x", 400)
        .attr("y", 0)
        .style("fill", d => grade_scale(d.grade_value))
        .style("font-size", 20)
        .attr("font-weight", 900)
        .text(d => d.grade)
        .attr("text-anchor", "middle")

      legend.append("text")
        .attr("class", "legend-text")
        .attr("x", 450)
        .attr("y", 0)
        .style("fill", "Black")
        .style("font-size", 15)
        .attr("font-weight", 700)
        .text(d => d.date)
        .attr("text-anchor", "middle")

      legend.append("text")
        .attr("class", "legend-text")
        .attr("x", 300)
        .attr("y", 0)
        .style("fill", "Black")
        .style("font-size", 15)
        .attr("font-weight", 700)
        .text(d => d.state)
        .attr("text-anchor", "middle")





      legend.append("rect")
        .attr("x", 525)
        .attr("y", -30)
        .attr("width", 50)
        .attr("height", 50)
        .style("fill", d => d.Biden == "-" ? "white" : demScale(d.Biden))

      legend.append("rect")
        .attr("x", 575)
        .attr("y", -30)
        .attr("width", 50)
        .attr("height", 50)
        .style("fill", d => d.Bloomberg == "-" ? "white" : demScale(d.Bloomberg))


      legend.append("rect")
        .attr("x", 625)
        .attr("y", -30)
        .attr("width", 50)
        .attr("height", 50)
        .style("fill", d => d.Buttigieg == "-" ? "white" : demScale(d.Buttigieg))

      legend.append("rect")
        .attr("x", 675)
        .attr("y", -30)
        .attr("width", 50)
        .attr("height", 50)
        .style("fill", d => d.Klobuchar == "-" ? "white" : demScale(d.Klobuchar))

      legend.append("rect")
        .attr("x", 725)
        .attr("y", -30)
        .attr("width", 50)
        .attr("height", 50)
        .style("fill", d => d.Sanders == "-" ? "white" : demScale(d.Sanders))

      legend.append("rect")
        .attr("x", 775)
        .attr("y", -30)
        .attr("width", 50)
        .attr("height", 50)
        .style("fill", d => d.Steyer == "-" ? "white" : demScale(d.Steyer))

      legend.append("rect")
        .attr("x", 825)
        .attr("y", -30)
        .attr("width", 50)
        .attr("height", 50)
        .style("fill", d => d.Warren == "-" ? "white" : demScale(d.Warren))

      legend.append("rect")
        .attr("x", 875)
        .attr("y", -30)
        .attr("width", 50)
        .attr("height", 50)
        .style("fill", d => d.Yang == "-" ? "white" : demScale(d.Yang))

      legend.append("text")
        .attr("class", "legend-text")
        .attr("x", 550)
        .attr("y", 0)
        .style("fill", "Black")
        .style("font-size", 15)
        .attr("font-weight", 700)
        .text(d => d.Biden == "-" ? "-" : d.Biden + "%")
        .attr("text-anchor", "middle")
      legend.append("text")
        .attr("class", "legend-text")
        .attr("x", 600)
        .attr("y", 0)
        .style("fill", "Black")
        .style("font-size", 15)
        .attr("font-weight", 700)
        .text(d => d.Bloomberg == "-" ? "-" : d.Bloomberg + "%")
        .attr("text-anchor", "middle")

      legend.append("text")
        .attr("class", "legend-text")
        .attr("x", 650)
        .attr("y", 0)
        .style("fill", "Black")
        .style("font-size", 15)
        .attr("font-weight", 700)
        .text(d => d.Buttigieg == "-" ? "-" : d.Buttigieg + "%")
        .attr("text-anchor", "middle")
      legend.append("text")
        .attr("class", "legend-text")
        .attr("x", 700)
        .attr("y", 0)
        .style("fill", "Black")
        .style("font-size", 15)
        .attr("font-weight", 700)
        .text(d => d.Klobuchar == "-" ? "-" : d.Klobuchar + "%")
        .attr("text-anchor", "middle")
      legend.append("text")
        .attr("class", "legend-text")
        .attr("x", 750)
        .attr("y", 0)
        .style("fill", "Black")
        .style("font-size", 15)
        .attr("font-weight", 700)
        .text(d => d.Sanders == "-" ? "-" : d.Sanders + "%")
        .attr("text-anchor", "middle")
      legend.append("text")
        .attr("class", "legend-text")
        .attr("x", 800)
        .attr("y", 0)
        .style("fill", "Black")
        .style("font-size", 15)
        .attr("font-weight", 700)
        .text(d => d.Steyer == "-" ? "-" : d.Steyer + "%")
        .attr("text-anchor", "middle")
      legend.append("text")
        .attr("class", "legend-text")
        .attr("x", 850)
        .attr("y", 0)
        .style("fill", "Black")
        .style("font-size", 15)
        .attr("font-weight", 700)
        .text(d => d.Warren == "-" ? "-" : d.Warren + "%")
        .attr("text-anchor", "middle")
      legend.append("text")
        .attr("class", "legend-text")
        .attr("x", 900)
        .attr("y", 0)
        .style("fill", "Black")
        .style("font-size", 15)
        .attr("font-weight", 700)
        .text(d => d.Yang == "-" ? "-" : d.Yang + "%")
        .attr("text-anchor", "middle")



      svg.append("text")
        .attr("x", 00)
        .attr("y", 50)
        .style("fill", "Black")
        .style("font-size", 20)
        .attr("font-weight", 900)
        .text("Pollster")
        .attr("text-anchor", "start")


      svg.append("text")
        .attr("x", 400)
        .attr("y", 50)
        .style("fill", "Black")
        .style("font-size", 20)
        .attr("font-weight", 900)
        .text("Grade")
        .attr("text-anchor", "middle")

      svg.append("text")
        .attr("x", 450)
        .attr("y", 50)
        .style("fill", "Black")
        .style("font-size", 20)
        .attr("font-weight", 900)
        .text("Date")
        .attr("text-anchor", "middle")


      svg.append("text")
        .attr("x", 550)
        .attr("y", 40)
        .style("fill", "Black")
        .style("font-size", 12)
        .attr("font-weight", 500)
        .text("Biden")
        .attr("text-anchor", "middle")
      svg.append("text")
        .attr("x", 600)
        .attr("y", 40)
        .style("fill", "Black")
        .style("font-size", 12)
        .attr("font-weight", 500)
        .text("Bloomberg")
        .attr("text-anchor", "middle")


      svg.append("text")
        .attr("x", 650)
        .attr("y", 40)
        .style("fill", "Black")
        .style("font-size", 12)
        .attr("font-weight", 500)
        .text("Buttigieg")
        .attr("text-anchor", "middle")
      svg.append("text")
        .attr("x", 700)
        .attr("y", 40)
        .style("fill", "Black")
        .style("font-size", 12)
        .attr("font-weight", 500)
        .text("Klobuchar")
        .attr("text-anchor", "middle")
      svg.append("text")
        .attr("x", 750)
        .attr("y", 40)
        .style("fill", "Black")
        .style("font-size", 12)
        .attr("font-weight", 500)
        .text("Sanders")
        .attr("text-anchor", "middle")
      svg.append("text")
        .attr("x", 800)
        .attr("y", 40)
        .style("fill", "Black")
        .style("font-size", 12)
        .attr("font-weight", 500)
        .text("Steyer")
        .attr("text-anchor", "middle")
      svg.append("text")
        .attr("x", 850)
        .attr("y", 40)
        .style("fill", "Black")
        .style("font-size", 12)
        .attr("font-weight", 500)
        .text("Warren")
        .attr("text-anchor", "middle")
      svg.append("text")
        .attr("x", 900)
        .attr("y", 40)
        .style("fill", "Black")
        .style("font-size", 12)
        .attr("font-weight", 500)
        .text("Yang")
        .attr("text-anchor", "middle")
      legend.append("line")
        .attr("x1", 0)
        .attr("x2", 950)
        .attr("y1", 20)
        .attr("y2", 20)
        .attr("stroke-width", 1)
        .attr("stroke", "#E2E2E2")

      svg.append("line")
        .attr("x1", 0)
        .attr("x2", 950)
        .attr("y1", 60)
        .attr("y2", 60)
        .attr("stroke-width", 2)
        .attr("stroke", "black")

      function wrap(text, width) {
        text.each(function () {
          var text = d3.select(this),
            words = text.text().split(/\s+/).reverse(),
            word,
            line = [],
            lineNumber = 0,
            lineHeight = 1.1, // ems
            x = text.attr("x"),
            y = text.attr("y"),
            dy = 0, //parseFloat(text.attr("dy")),
            tspan = text.text(null)
              .append("tspan")
              .attr("x", x)
              .attr("y", y)
              .attr("dy", dy + "em");
          while (word = words.pop()) {
            line.push(word);
            tspan.text(line.join(" "));
            if (tspan.node().getComputedTextLength() > width) {
              line.pop();
              tspan.text(line.join(" "));
              line = [word];
              tspan = text.append("tspan")
                .attr("x", x)
                .attr("y", y)
                .attr("dy", ++lineNumber * lineHeight + dy + "em")
                .text(word);
            }
          }
        });
      }
    })</script>
  <a href="time.csv">
    <h3 style="color: #0077FF;text-decoration: underline;">Download The Data</h3>
  </a>
  <h1 style="font-weight:700 ;">Suggested Sites</h1>
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<ins class="adsbygoogle"
     style="display:block;margin-right: 10%;margin-left: 10%"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-8025120308040073"
     data-ad-slot="1593783855"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
  <div style="height: 70px;background-color: darkblue;width: 102%;margin-left: -10px;margin-bottom: -10px;">
    <h4 style="font-weight: 400;color: white;padding-top: 30px;margin-left: 30;">Â© 2020 JHK FORECASTS</h4>
  </div>


  <script src="us2.js"></script>
  <script src="bubblemap.js"></script>
  <script src="delegates.js"></script>

  <script src="topline copy.js"></script>
  </div>
</body>

</html>